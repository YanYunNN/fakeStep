name: 刷步数

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]
  schedule:
    - cron: 5 16,23 * * *
  watch:
    types: started

jobs:
  verify:
    runs-on: ubuntu-latest
    steps:
      - name: generate random number
        run: |
          user="${{ secrets.USER }}"
          pwd="${{ secrets.PWD }}"
          current_time=$(date "+%Y-%m-%d %H:%M:%S")
          echo "Current Time: ${current_time}"
          if [ $(date +%H%M) -ge 0800 ]; then
            step="$(( $RANDOM % 3534 + 20342 ))"
          else
            step="$(( $RANDOM % 1534 + 19888 ))"
          fi
          echo "Step: ${step}"
          curl "https://sport-api.yyink.cn/api/mi?user=${user}&password=${pwd}&step=${step}"

 #build:
 #  runs-on: ubuntu-latest
 #  steps:
 #    - uses: actions/checkout@v2
 #    - name: 初始化Python
 #      uses: actions/setup-python@v2
 #      with:
 #        python-version: 3.7
 #    - name: 开始
 #      run: |
 #        pip install requests
 #        pmode='${{ secrets.PMODE }}'
 #        pkey='${{ secrets.PKEY }}'
 #        user='${{ secrets.USER }}'
 #        pwd='${{ secrets.PWD }}'
 #        step='${{ secrets.STEP }}'
 #        
 #        
 #         https://sport-api.yyink.cn/api/mi?user=18720158315&password=caixin9749&step=22002
 #        python3 main.py ${pmode} ${pkey} ${user} ${pwd} ${step}  


